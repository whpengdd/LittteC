# 设计文档 (Design Document)

## 项目概述
**项目名称**: Student c 
**目标**: 构建一个本地化的邮件记录分析系统，支持处理大规模数据（1GB+），利用双 AI 引擎（Gemini or Azure OpenAI）进行智能分析，并提供仪表盘与人员名录功能。

## 核心需求

### 1. 数据导入与存储 (Technical Core)
- **支持格式**: CSV, TXT, JSON。
- **容量要求**: 支持单文件超过 1GB 的超大文件导入（流式处理）。
- **存储架构**: 
  - **本地化**: 严禁使用浏览器数据库（IndexingDB/Local Storage），所有数据必须存储在运行环境的本地文件系统或本地数据库（DuckDB/SQLite）中。
  - **清理机制**: 支持删除任务，并**强制联级清空**该任务对应的所有数据库记录和物理文件。

### 2. AI 智能分析 (Intelligence)
- **双引擎支持**:
  - **Model A**: Google Gemini
  - **Model B**: Azure OpenAI (GPT)
- **全局配置**: LLM 提供商为全局设置，默认使用 Azure，可在设置页面切换
- **功能**: 对邮件内容进行摘要、情感分析、实体提取等。

### 3. 功能模块 (Functional Requirements)

#### A. 仪表盘 (Dashboard)
- 展示数据概览：邮件总数、时间跨度、活跃发件人 Top N。
- 任务状态监控：当前分析进度、存储占用。

#### B. 邮件数据管理 (Data Management)
- **任务列表**: 查看所有导入的“任务”（数据集）。
- **数据预览**: 表格形式查看导入的原始邮件数据。
- **删除功能**: 级联删除任务数据与文件。

#### C. 人员名录 (People Directory)
- 自动从邮件中提取发件人/收件人信息。
- 建立联系人画像（基于 AI 分析的交互频率、话题）。

#### D. 智能洞察 (Insights)
- 基于任务上下文（Task Context）进行 Q&A。
- 比如：“查询来自 Alice 的所有关于 'Project X' 的邮件”。

## 用户交互 (User Flows)
1.  **数据摄入**: 用户上传大文件 -> 后端流式存储 -> DuckDB 索引。
2.  **分析配置**: 选择 AI 模型 (Gemini/Azure) -> 发起分析任务。
3.  **结果浏览**: 在仪表盘查看宏观数据，在人员名录查看个体详情。
